# -*- python -*-

{'extra_feedgnuplot': '--ylabel="khz" --y2label="%" --ymin=0 --ymax=3200 --y2min=-10 --y2max=110',
 'period': 10000,
 'signals': [{'exportable': False,
              'id': 'tvist_frame',
              'name': 'frame',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'scale': 'lambda x: x % 100',
              'style': 'with linespoints',
              'visible': False,
              'y': 2},
             {'exportable': False,
              'id': 'tvist_y',
              'name': 'Z-coord, screen_contact (right)',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with linespoints lc rgb "#B20000"',
              'y': 2},
             {'exportable': False,
              'id': 'tvist_tap',
              'name': 'tap',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with linespoints',
              'visible': False,
              'y': 2},
             {'exportable': False,
              'id': 'tvist_avg_low',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with linespoints',
              'visible': False,
              'y': 2},
             {'exportable': False,
              'id': 'tvist_avg_high',
              'name': 'avg_high',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with linespoints',
              'visible': False,
              'y': 2},
             {'expectable': False,
              'exportable': False,
              'id': 'tvist_virtual',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'visible': False},
             {'expectable': False,
              'exportable': False,
              'expr': 'lambda x: (dt[0] / (tvist_frame[0] - tvist_frame[-1])) * 1000 if t[0] > 0 else 0',
              'id': 'tvist_dt',
              'name': 'dt, ms (right)',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with linespoints',
              'subsignal': 1,
              'visible': False,
              'y': 2},
             {'expectable': False,
              'exportable': False,
              'expr': 'lambda x: (T[0] if tvist_tap[0] > tvist_tap[-1] else screen_contact_time[-1]) if t[0] > 0 else 0',
              'id': 'screen_contact_time',
              'name': 'screen contact',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'scale': 'lambda x: interpolate if t[0] > 0 and screen_contact_time[-1] == screen_contact_time[0] else screen_contact_time[0]',
              'style': 'with steps',
              'subsignal': 1,
              'visible': False,
              'y': 2},
             {'expectable': False,
              'exportable': True,
              'expr': 'lambda x: tvist_y[0] if t[0] > 0 and tvist_tap[0] > tvist_tap[-1] else None',
              'id': 'screen_contact_mark',
              'name': '',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with points pt 6 ps 3 lc rgb "#B20000"',
              'subsignal': 1,
              'y': 2},
             {'expectable': False,
              'exportable': True,
              'expr': 'lambda x: (tvist_y[0], str(int(tvist_frame[0]))) if t[0] > 0 and tvist_tap[0] > tvist_tap[-1] else (interpolate, interpolate)',
              'id': 'screen_contact_label',
              'name': ' ',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'using ($1):($2):3 with labels right offset -1,0',
              'subsignal': 1,
              'visible': True,
              'y': 2},
             {'expectable': False,
              'exportable': False,
              'expr': 'lambda x: (T[0] if t[0] > 0 and tvist_avg_high[0] > tvist_avg_high[-1] else end_refresh_time[-1]) if t[0] > 0 else 0',
              'id': 'end_refresh_time_abs',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'scale': 'lambda x: interpolate if t[0] > 0 and end_refresh_time_abs[-1] == end_refresh_time_abs[0] else end_refresh_time_abs[0]',
              'style': 'with steps',
              'subsignal': 1,
              'visible': False,
              'y': 2},
             {'expectable': False,
              'exportable': False,
              'expr': 'lambda x: end_refresh_time_abs[0]',
              'id': 'end_refresh_time',
              'name': 'end refresh, ms (right)',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'scale': 'lambda x: end_refresh_time[0] and screen_contact_time[0] and 1000 * max(end_refresh_time[0] - screen_contact_time[0],0)',
              'style': 'with steps lc rgb "#c000c0"',
              'subsignal': 1,
              'y': 2},
             {'expectable': False,
              'exportable': True,
              'expr': 'lambda x: tvist_y[0] if t[0] > 0 and tvist_avg_high[0] > tvist_avg_high[-1] else None',
              'id': 'end_refresh_mark',
              'name': '',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with points pt 6 ps 3 lc rgb "#c000c0"',
              'subsignal': 1,
              'y': 2},
             {'expectable': False,
              'exportable': True,
              'expr': 'lambda x: (tvist_y[0], str(int(tvist_frame[0]))) if t[0] > 0 and tvist_avg_high[0] > tvist_avg_high[-1] else (interpolate, interpolate)',
              'id': 'end_refresh_label',
              'name': ' ',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'using ($1):($2):3 with labels center offset 1,-0.9',
              'subsignal': 1,
              'visible': True,
              'y': 2},
             {'expectable': False,
              'exportable': False,
              'expr': 'lambda x: (T[0] if t[0] > 0 and tvist_avg_low[0] > tvist_avg_low[-1] else begin_refresh_time[-1]) if t[0] > 0 else 0',
              'id': 'begin_refresh_time',
              'name': 'begin refresh, ms (right)',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'scale': 'lambda x: begin_refresh_time[0] and screen_contact_time[0] and 1000 * max(begin_refresh_time[0] - screen_contact_time[0],0)',
              'style': 'with steps lc rgb "#00c0c0"',
              'subsignal': 1,
              'y': 2},
             {'expectable': False,
              'exportable': True,
              'expr': 'lambda x: tvist_y[0] if t[0] > 0 and tvist_avg_low[0] > tvist_avg_low[-1] else None',
              'id': 'begin_refresh_mark',
              'name': '',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'with points pt 6 ps 3 lc rgb "#00c0c0"',
              'subsignal': 1,
              'y': 2},
             {'expectable': False,
              'exportable': True,
              'expr': 'lambda x: (tvist_y[0], str(int(tvist_frame[0]))) if t[0] > 0 and tvist_avg_low[0] > tvist_avg_low[-1] else (interpolate, interpolate)',
              'id': 'begin_refresh_label',
              'name': ' ',
              'nosig': 'NO_SIG',
              'nuce': 3,
              'style': 'using ($1):($2):3 with labels center offset -1,0.8',
              'subsignal': 1,
              'visible': True,
              'y': 2}],
 'sigs_file': '/system/etc/sampler/tvist.ini',
 'version': 2}
